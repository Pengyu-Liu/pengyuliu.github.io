---
title: 'TRAP4vAPP Finding exoplanets in vAPP coronagraphic data'
date: 2020-10-11
permalink: /posts/2020/TRAP4vAPP Finding exoplanets in vAPP coronagraphic data

---

This is a blog that records my master project TRAP4vAPP Finding exoplanets in vAPP coronagraphic data at Leiden Observatory 2020-2021.

## Week 7

### 11 Oct 2020

Moved the progress record from the former google sheet to this site. Finished all the steps for one wavelength channel. But the result is not as good as my old method. The planets are not obvious. I tried at least 3 ways to extract star intensity: use the star model, fit the star model(shifted) to the decentered bkg_subtacted images(mean(optimal)=~1.1), fit star model to the aligned bkg_subtacted images and shift(mean(optimal)=1.00...). Also for science frames PCA, I tried masking planets or not when building basis and it seems I should not mask planets(results are different). I fitted the basis to every frame with planets masked. What I have tried today still cannot give a better result than my old way and even worse. There must be something wrong in middle steps. The first picture is my old method and the second is today's result. Debug tomorrow!

![old](https://raw.githubusercontent.com/Pengyu-Liu/Pengyu-Liu.github.io/master/images/blogs/old12102020.png)
![new](https://raw.githubusercontent.com/Pengyu-Liu/Pengyu-Liu.github.io/master/images/blogs/new12102020.png)

### 12 Oct 2020
Go through all the steps to check if there are some bugs in the code, and didn't find one. Increased PCA group number from 5 to 8 to increase precisions. No big differences than yesterday. After trying many possibilities, masking planets when fitting PCA basis can increase planets' signal a little bit, so need to mask; fitting low order polynomial does remove residual big structures(static noise), so need to do; fitting star model should only use extract star model part; the difference between fitting first shift later or shiftt first fitting later is small, and I can keep the same as David's method right now; subtracting mean value at first when doing PCA doesn't have a big influence and I don't subtract the mean. The possible improvement or problem I think lies in PCA modelling science frames. Because I cannot subtract star intensity totally, there are still some remained. When doing PCA, the frames are not aligned, so the remaining star intensity has a big influence on the PCA basis construction. I checked the first 10 compenents:the first is sky bkg, others are all about the central star. I need to evaluate how many components I should use tomorrow. Also I put the simple method to a new notebook and its result is better than the complex one. Tomorrow I need to try new wavelength channels(I tried some tonight and found that I cannot just use the same code. There are many differences between channels.) Another thing is the final image on David's paper is a combination of wavelength slices. No wonder my single image is not as good as that one! I was stuck for a long time to try to get a similar one as his by using just one channel... Wasted a lot of time because didn't read carefully.

### 13 Oct 2020
Compared three methods: old, new, new(mask star), and the result of the old method is the best. Plot three contrast curves. As for the PCA components, 10 is enough.

### 14 Oct 2020
Weekly meeting with supervisors: Matthew and Alex said I should set plots with the same scale (colorbar and x,y axis) and put curves in the same plot so that people can comparet them. It is very important. Next week I will implement my code on all channels and try to inject negative planet.
